{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./app/components/scripts/YoutubePlaylistModule.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","object_to_query_string","entries","map","_ref","_ref2","_slicedToArray","val","concat","join","YoutubePlaylistModule","_ref3","api_key","element","playlist_id","_ref3$max_results","max_results","_ref3$query_options","query_options","_classCallCheck","this","request_domain","_this","length","Array","from","item","_get_data","getAttribute","_this2","query","part","playlistId","maxResults","fetch","then","response","json","json_data","_parse_data","catch","error","console","data","snippet","resourceId","videoId","thumbnails","medium","url","title","_this3","items","playlist_items_template","_this4","template","playlist_template","playlist","DOMParser","parseFromString","body","childNodes","video_items","getElementsByClassName","iframe","autoplay_state","autoplay","video_url","id","index","this_array","setAttribute","classList","add","addEventListener","event","preventDefault","remove","appendChild"],"mappings":"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","file":"bundle.main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/**\n * Transforms data object into URL query string.\n *\n * @param  object object The object to be converted into query string.\n * @return string        The Object transformed into query string.\n */\nfunction object_to_query_string( object ) {\n\treturn Object.entries( object ).map( ( [key, val] ) => `${key}=${val}` ).join('&');\n}\n\nexport default class YoutubePlaylistModule {\n\tconstructor({\n\t\tapi_key,\n\t\telement,\n\t\tplaylist_id,\n\t\tmax_results = '5',\n\t\tquery_options = {}\n\t}) {\n\t\tthis.api_key        = api_key;\n\t\tthis.element        = element;\n\t\tthis.playlist_id    = playlist_id;\n\t\tthis.max_results    = max_results;\n\t\tthis.query_options  = query_options;\n\t\tthis.request_domain = 'https://www.googleapis.com/youtube/v3/playlistItems';\n\t}\n\n\t/**\n\t * Initializes module\n\t */\n\tinit() {\n\t\tif ( this.element.length ) {\n\t\t\tArray.from( this.element ).map( item => {\n\t\t\t\tthis._get_data( item.getAttribute( 'data-playlist' ), item );\n\t\t\t});\n\t\t}\n\n\t\tif ( this.playlist_id ) this._get_data( this.playlist_id, this.element );\n\t}\n\n\t/**\n\t * Fetches YouTube API data.\n\t *\n\t * @param  string playlist_id The playlist ID to pull the videos from.\n\t * @param  object element     The HTML element to attach the playlist to.\n\t */\n\t_get_data( playlist_id, element ) {\n\t\tconst query = {\n\t\t\tpart: 'snippet',\n\t\t\tplaylistId: playlist_id,\n\t\t\tmaxResults: this.max_results,\n\t\t\tkey: this.api_key\n\t\t};\n\n\t\tfetch( this.request_domain + '?' + object_to_query_string( query ) )\n\t\t\t.then( response => response.json() )\n\t\t\t.then( json_data => {\n\t\t\t\tthis._parse_data( json_data, element );\n\t\t\t})\n\t\t\t.catch( error => console.error( error ) ); // eslint-disable-line no-console\n\t}\n\n\t/**\n\t * Method that returns the playlist video items.\n\t *\n\t * @param  object data Data for each playlist video item.\n\t * @return string      The playlist markup\n\t */\n\tplaylist_items_template( data ) {\n\t\treturn `<li>\n\t\t\t<a class=\"ypm_video_items\" href=\"#\" data-id=\"${ data.snippet.resourceId.videoId }\">\n\t\t\t\t<img src=\"${ data.snippet.thumbnails.medium.url }\" />\n\t\t\t\t<p>${ data.snippet.title }</p>\n\t\t\t</a>\n\t\t</li>`;\n\t}\n\n\t/**\n\t * Method that returns the playlist template build out.\n\t *\n\t * @param  object response The data returned from the YouTube API.\n\t * @return string          The playlist markup\n\t */\n\tplaylist_template( response ) {\n\t\treturn `<div class=\"ypm_youtube-video-playlist\">\n\t\t\t<div class=\"ypm_video-player\">\n\t\t\t\t<iframe class=\"ypm_iframe\" src=\"\" width=\"560\" height=\"315\" frameborder=\"0\" allowfullscreen></iframe>\n\t\t\t</div>\n\n\t\t\t<div class=\"ypm_video-list-wrapper\">\n\t\t\t\t<ul class=\"ypm_video-list\">\n\t\t\t\t\t${ response.items.map( data => this.playlist_items_template( data ) ).join('') }\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>`;\n\t}\n\n\t/**\n\t * Parse response data into playlist HTML.\n\t *\n\t * @param  object response The data returned from the YouTube API.\n\t * @param  object element  The DOM element to attach the playlist.\n\t */\n\t_parse_data( response, element ) {\n\t\tconst template       = this.playlist_template( response );\n\t\tconst fragment       = new DOMParser().parseFromString( template, 'text/html' );\n\t\tconst playlist       = fragment.body.childNodes[0];\n\t\tconst video_items    = playlist.getElementsByClassName( 'ypm_video_items' );\n\t\tconst iframe         = playlist.getElementsByClassName( 'ypm_iframe' )[0];\n\t\tconst autoplay_state = this.query_options.autoplay;\n\n\t\t// Other params: https://developers.google.com/youtube/player_parameters\n\t\tconst video_url = id => `https://www.youtube.com/embed/${ id }?${ object_to_query_string( this.query_options ) }`;\n\n\t\tArray.from( video_items ).map( ( item, index, this_array ) => {\n\t\t\tif ( index === 0 ) {\n\t\t\t\tiframe.setAttribute( 'src', video_url( item.getAttribute( 'data-id' ) ) );\n\t\t\t\titem.classList.add( 'ypm_active' );\n\t\t\t\tthis.query_options.autoplay = 0;\n\t\t\t} else {\n\t\t\t\tthis.query_options.autoplay = autoplay_state;\n\t\t\t}\n\n\t\t\titem.addEventListener( 'click', function( event ) {\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tthis_array.map( item => item.classList.remove( 'ypm_active' ) );\n\t\t\t\tthis.classList.add( 'ypm_active' );\n\t\t\t\tiframe.setAttribute( 'src', video_url( this.getAttribute( 'data-id' ) ) );\n\t\t\t});\n\t\t});\n\n\t\telement.appendChild( playlist );\n\t}\n}\n"],"sourceRoot":""}